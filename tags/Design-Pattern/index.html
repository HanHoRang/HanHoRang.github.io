<!DOCTYPE html>
<html  lang="kr">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.9.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>Tag: Design Pattern - HoRang Blog</title>


    <meta property="og:type" content="website">
<meta property="og:title" content="HoRang Blog">
<meta property="og:url" content="https://hanhorang.github.io/tags/Design-Pattern/index.html">
<meta property="og:site_name" content="HoRang Blog">
<meta property="og:locale" content="kr">
<meta property="og:image" content="https://hanhorang.github.io/images/og_image.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HoRang Blog">
<meta name="twitter:image" content="https://hanhorang.github.io/images/og_image.png">







<link rel="icon" href="/images/coring.gif">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-2-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/coring.gif" alt="HoRang Blog" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    <a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Suche" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-8-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">Tags</a></li>
            <li class="is-active"><a href="#" aria-current="page">Design Pattern</a></li>
        </ul>
        </nav>
    </div>
</div>

    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/03/20/Design_Pattern/Prototype_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Prototype Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-19T15:00:00.000Z">2020-03-20</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 minutes lesen (Über 1241 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/20/Design_Pattern/Prototype_Pattern/">Prototype Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="프로토타입-디자인-패턴">프로토타입 디자인 패턴</span></h2>
<blockquote>
<p>원형이 되는 인스턴스를 사용하여 생성할 객체의 종류를 명시하고, 이렇게 만든 견본을 복사해서 새로운 객체를 생성합니다.</p>
</blockquote>
<p>생성할 객체들의 타입이 프로토타입인 인스턴스로 부터 결정되도록 하며, 인스턴스는 새 객체를 만들기 위해 자신을 복제(clone)하는 패턴이며 객체를 생성(create)하는 고유의 비용이 불가피하게 매우 클 때, 이 비용을 줄일 수 있습니다. [위키백과]</p>
<p><strong>구현</strong></p>
<p>생성된 객체를 복사하여 구현됩니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> copy <span class="keyword">import</span> deepcopy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move_point</span><span class="params">(self, x, y)</span>:</span></span><br><span class="line">        self.x += x</span><br><span class="line">        self.y += y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display_point</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;self.x&#125;</span>, <span class="subst">&#123;self.y&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clone</span><span class="params">(self)</span>:</span></span><br><span class="line">        obj = deepcopy(self)</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    p1 = Point(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">    p1.display_point()</span><br><span class="line">    p2 = p1.clone()</span><br><span class="line">    p2.move_point(<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">    p2.display_point() <span class="comment"># 2 3 </span></span><br><span class="line">    p1.display_point() <span class="comment"># 1 2</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>copy.deepcopy(self), 깊은 복사</code> or <code>copy.copy(self), 얇은 복사</code> 를 통해 객체를 복사하여 구현할 수 있습니다.</li>
</ul>
<p>추가로 파이썬의 매직 메소드(<code>__init__</code>, <code>__call__</code>)로 활용하여 객체 생성의 리소스를 절약할 수 있습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Class Handler:</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="comment"># 모델 Load 및 학습</span></span><br><span class="line">        self.model = Predictor()</span><br><span class="line">        self.model.load_weights()</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, req)</span>:</span></span><br><span class="line">        <span class="comment"># req 값 모델 적용 </span></span><br><span class="line">        <span class="keyword">return</span> self.model(req.input)</span><br></pre></td></tr></table></figure>
<h4><span id="할당-vs-깊은-복사-vs-얇은-복사">할당(=) vs 깊은 복사 vs 얇은 복사</span></h4>
<p>클래스를 할당하면 되는데 굳이 깊은 복사를 해야하는 이유가 존재합니다. 작동 방식의 차이 때문인데요. 다음과 같은 그림으로 작동 차이를 파악할 수 있습니다.</p>
<p><img src="https://miro.medium.com/max/1880/1*V22I5caA8NaY1m12DpRnfg.png" alt></p>
<p>할당과 얇은 복사의 차이점은 객체 생성의 차이이며, 깊은 복사와 얇은 복사의 차이는 값을 가르키는 포인터의 차이입니다!</p>
<h4><span id="어디에-사용해야-할까요">어디에 사용해야 할까요?</span></h4>
<p>위의 예제를 보신 것처럼 프로토타입 패턴의 요점은 <code>객체를 생성(create)하는 고유의 비용이 불가피하게 매우 클 때, 이 비용을 줄임</code> 에 있습니다.  고유의 비용이 무엇일까요?</p>
<p>자세한 활용처를 알기위해  위키 백과에서 소개한 프로토타입의 활용처를  스크립트 해왔습니다.</p>
<blockquote>
<p>The Prototype design pattern solves problems like: [<a href="https://en.wikipedia.org/wiki/Prototype_pattern#cite_note-3">3]</a></p>
<ul>
<li>How can objects be created so that which objects to create can be specified at run-time?</li>
</ul>
<p>런타임에서 생성 객체를 지정하고 싶을 때</p>
<ul>
<li>How can dynamically loaded classes be instantiated?</li>
</ul>
<p>상태값이 변하는 클래스를 인스턴스화하고 싶을 때</p>
</blockquote>
<p><img src="https://media1.giphy.com/media/3o7buirYcmV5nSwIRW/giphy.webp?cid=790b76116022ba64967abc5a153dec4ebb1b2a7c27bc5ea4&amp;rid=giphy.webp" alt></p>
<center> 이해는 했는데 어떤 상황에 적절할까요??  </center>
조심스럽게 예상해봅니다만.. 데이터 전처리 과정에서 복사를 통해 고유의 비용을 줄였던 기억이 있습니다. 결론부터 말씀드리면 고유의 비용은 `시간` 이라고 볼 수 있습니다. 약 2.5GB 용량의 CSV 데이터를 데이터프레임으로 불러올때 2분의 시간이 소비되었지만,  데이터프레임을 복사하는 것에는 바로 된 것을 보아 **런타임에서 무엇의 작용**을 통해 고유의 비용이 줄지 않았나 생각됩니다.
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">search = pd.read_csv(<span class="string">'Search.csv'</span>)</span><br><span class="line">search.head()</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">CLNT_ID</th>
<th style="text-align:right">SESS_ID</th>
<th style="text-align:right">KWD_NM</th>
<th style="text-align:right">SEARCH_CNT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">7112876</td>
<td style="text-align:right">빌리프 아이크림</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">프리메라 마스크팩</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">여성청결제</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">5612428</td>
<td style="text-align:right">1876482</td>
<td style="text-align:right">명품가방</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5612428</td>
<td style="text-align:right">658123</td>
<td style="text-align:right">콩순이 아이스크림</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search2 = search.copy() </span><br><span class="line">search = search.drop(<span class="string">"CLNT_ID"</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">search.head()</span><br><span class="line">search2.head()</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">SESS_ID</th>
<th style="text-align:right">KWD_NM</th>
<th style="text-align:right">SEARCH_CNT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">7112876</td>
<td style="text-align:right">빌리프 아이크림</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">프리메라 마스크팩</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">여성청결제</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">1876482</td>
<td style="text-align:right">명품가방</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">658123</td>
<td style="text-align:right">콩순이 아이스크림</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:right"></th>
<th style="text-align:right">CLNT_ID</th>
<th style="text-align:right">SESS_ID</th>
<th style="text-align:right">KWD_NM</th>
<th style="text-align:right">SEARCH_CNT</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">0</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">7112876</td>
<td style="text-align:right">빌리프 아이크림</td>
<td style="text-align:right">6</td>
</tr>
<tr>
<td style="text-align:right">1</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">프리메라 마스크팩</td>
<td style="text-align:right">3</td>
</tr>
<tr>
<td style="text-align:right">2</td>
<td style="text-align:right">5607714</td>
<td style="text-align:right">4090791</td>
<td style="text-align:right">여성청결제</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">3</td>
<td style="text-align:right">5612428</td>
<td style="text-align:right">1876482</td>
<td style="text-align:right">명품가방</td>
<td style="text-align:right">1</td>
</tr>
<tr>
<td style="text-align:right">4</td>
<td style="text-align:right">5612428</td>
<td style="text-align:right">658123</td>
<td style="text-align:right">콩순이 아이스크림</td>
<td style="text-align:right">1</td>
</tr>
</tbody>
</table>
<ul>
<li>Pandas 에서 제공하는 COPY() 연산으로 deepcopy가 됩니다.</li>
<li>#1 시점에서 데이터를 로드하는 시간이 소요되지 반면,   <code>=</code>  연산으로 객체를 복사하는 경우 시간 소비가 상대적으로 적은 것을 체감할 수 있습니다.</li>
</ul>
<h4><span id="결론">결론</span></h4>
<p>프로토타입 패턴을 사용하는 상황으로 큰 데이터를 로드할 때 사용하기 적합합니다.  비용적 측면에서는 시간 자원을 크게 아낄 수 있음으로 개발성을 높일 수 있어 효율적이라 판단됩니다.</p>
<h3><span id="참고">참고</span></h3>
<p><a href="https://ko.wikipedia.org/wiki/%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85_%ED%8C%A8%ED%84%B4">프로토타입 위키백과</a></p>
<p><a href="https://github.com/hwkim94/competitions/tree/master/BIgContest2018">데이터 전처리 깃허브</a></p>
<p><a href="https://medium.com/@thawsitt/assignment-vs-shallow-copy-vs-deep-copy-in-python-f70c2f0ebd86">할당 vs 얇은 복사 vs 깊은 복사</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/03/05/Design_Pattern/Strategy_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Strategy Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-05T08:25:24.000Z">2020-03-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 minutes lesen (Über 2422 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/03/05/Design_Pattern/Strategy_Pattern/">Strategy Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="디자인-패턴">디자인 패턴</span></h2>
<blockquote>
<p>중요한 것은 디자인 패턴에 얽매이는 것이 아니라 그 패턴이 <strong>왜 효율적인 방식인지를 이해</strong>하여야 한다.</p>
</blockquote>
<p>디자인 패턴 세 번째 발표자료이며 <strong>스트레티지, 팩토리 패턴</strong>에 대해 발표하겠습니다.</p>
<p>저는 저번 시간과 같이 패턴에 대해 다음과 같은 관점으로 접근하였습니다.</p>
<ul>
<li>패턴이 된 원인(어떤 점이 효율적인가), 보완해야할 점(to 잡기술 배우기)</li>
<li>패턴이 현대 프로그래밍 언어에서는 어떻게 사용되는가?</li>
</ul>
<h3><span id="스트레티지-패턴">스트레티지 패턴</span></h3>
<p>전략 패턴 (정책 패턴이라고도 함)은 런타임시 알고리즘을 선택할 수있는 행동 소프트웨어 디자인 패턴입니다. 코드는 단일 알고리즘을 직접 구현하는 대신 알고리즘 계열에서 사용할 알고리즘에 대한 런타임 명령을 수신합니다.</p>
<p>전략을 사용하면 알고리즘을 사용하는 클라이언트와 알고리즘이 독립적으로 달라질 수 있습니다. 전략은 감마 (Gamma) 등의 영향력있는 책 디자인 패턴에 포함 된 패턴 중 하나입니다. 유연하고 재사용 가능한 객체 지향 소프트웨어를 디자인하는 방법을 설명하기 위해 디자인 패턴을 사용하는 개념을 대중화했습니다. 런타임까지 사용할 알고리즘에 대한 결정을 연기하면 호출 코드를보다 유연하고 재사용 할 수 있습니다.</p>
<p>예를 들어, 들어오는 데이터에 대한 유효성 검사를 수행하는 클래스는 전략 유형을 사용하여 데이터 형식, 데이터 소스, 사용자 선택 또는 기타 식별 요소에 따라 유효성 검사 알고리즘을 선택할 수 있습니다. 이러한 요소는 런타임까지 알려지지 않았으며 완전히 다른 유효성 검사를 수행해야 할 수도 있습니다. 유효성 검사 객체와 별도로 캡슐화 된 유효성 검사 알고리즘 (전략)은 코드 복제없이 시스템 (또는 다른 시스템)의 다른 영역에있는 다른 유효성 검사 객체에 의해 사용될 수 있습니다.</p>
<p>일반적으로 전략 패턴은 일부 코드에 대한 참조를 데이터 구조에 저장하고 검색합니다. 이는 네이티브 함수 포인터, 1 급 함수, 객체 지향 프로그래밍 언어의 클래스 또는 클래스 인스턴스와 같은 메커니즘 또는 리플렉션을 통해 언어 구현의 내부 코드 저장소에 액세스하여 달성 할 수 있습니다.</p>
<p><strong>UML</strong></p>
<p><img src="https://blog.storyg.co/images/30330328-c4410f50-980f-11e7-95d4-79b111c4a2ed.png" alt="img"></p>
<h4><span id="전략패턴의-필요성과-구현">전략패턴의 필요성과 구현</span></h4>
<p>전략 패턴을 왜 필요하고, 어떻게 구현할 것 인지 간단한 예제로 설명하겠습니다.다음 예제는 캐릭터가 무기를 가지고 공격하는 클래스를 구현한 예제입니다. 언어는 파이썬입니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Character</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">()</span>:</span></span><br><span class="line">        self.weapon = new Knife()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"Attack Knife!!"</span>)</span><br><span class="line">        Knife().Attack()</span><br></pre></td></tr></table></figure>
<ul>
<li>실행상 아무 문제없지만, “캐릭터는 단검에 의존된 형태” 입니다. 만약 캐릭터에 검을 장착시키고 싶다면 어떻게 해야할까요?</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Character</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">()</span>:</span></span><br><span class="line">        self.weapon = new Sword()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"Attack Sword!!"</span>)</span><br><span class="line">        Sword().Attack()</span><br></pre></td></tr></table></figure>
<ul>
<li>야메로 코드를 변경하여 캐릭터에 검을 장착하였습니다. 하지만 단검과 검을 변경해야하는 캐릭터가 필요하면? 헬게이트 오픈이 예상됩니다변경 요청이 발생할 때마다 코드를 수정해야 합니다. 유지보수가 어려워지며 이는 캐릭터가 무기에 의존되있어 발생합니다. 이를 스프링 프레임워크에서 사용하는 개념으로 설명하자면  <code>DI:Dependency Injection, 의존성 주입</code> 라 합니다.</li>
</ul>
<p>의존성을 깨드리기 위해선 어떻게 해야할까요? 간단합니다. Weapon 을 클래스로 만들어 캡슐화시키면 됩니다.  캡슐화를 위해 <strong>인터페이스</strong>를 사용하였습니다. 인터페이스는 클래스는 확장을 위해 <code>open/closed principle(OCP)</code>와 호환되며, 동작을 사용하는 클래스를 중단하지 않고 동작을 변경할 수 있으며, 중요한 코드 변경없이 사용 된 특정 구현을 변경하여 클래스가 동작간에 전환 할 수 있습니다. 디자인 타임뿐만 아니라 런타임에도 동작을 변경할 수 있습니다.  인터페이스를 통해 구현된 예제는 다음과 같습니다.</p>
<blockquote>
<p><code>open/closed principle(OCP), 개방 / 폐쇄 원칙</code> :  클래스는 확장을 위해 개방되어야하지만 수정을 위해 폐쇄되어야한다는 원칙입니다.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> abc </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weapon</span>:</span></span><br><span class="line"></span><br><span class="line">	__metaclass__ = abc.ABCMeta</span><br><span class="line"></span><br><span class="line"><span class="meta">	@abc.abstractmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Knife</span><span class="params">(Weapon)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"Attack Knife!!"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sword</span><span class="params">(Weapon)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"Attack Sword!!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Character</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, weapon)</span>:</span></span><br><span class="line">		super(Character, self).__init__()</span><br><span class="line">		self.weapon = weapon</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">setWeapon</span><span class="params">(self,weapon)</span>:</span></span><br><span class="line">		self.weapon = weapon</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">doAttack</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.weapon.doAttack()</span><br><span class="line"></span><br><span class="line">c = Character(Knife())</span><br><span class="line">c.doAttack()</span><br><span class="line">c.setWeapon(Sword())</span><br><span class="line">c.doAttack()</span><br></pre></td></tr></table></figure>
<ul>
<li>앞서 무기 변경 요청에 대해 메인 함수에서 결정할 수 있게 되었습니다. 즉 무기를 제어하는 제어권이 캐릭터에 있는 것이 아니라 메인 함수로 역전되었으므로 이를 제어가 역전되었다라고 하며 스프링에서 사용하는 기술 영어로  <code>IOC:Inversion of Control, 제어의 역전</code> 이라 합니다.</li>
</ul>
<p><strong>그렇다면 지금은?</strong></p>
<p>사실 파이썬에서는 객체화를 통해 전략 패턴을 구현할 필요는 없습니다. 함수 자체를 변수화시키면 매우 깔끔하고 간단한 전략 패턴을 구현할 수 있거든요. 다음은 Pycon 2009 의 디자인 패턴으로 소개된 전략 패턴 예제입니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">strategy_add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">strategy_minus</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line"></span><br><span class="line">solver = strategy_add</span><br><span class="line"><span class="keyword">print</span> solver(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">solver = strategy_minus</span><br><span class="line"><span class="keyword">print</span> solver(<span class="number">2</span>, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>매우 깔끔하도다 !</li>
</ul>
<h4><span id="전략-패턴을-넘어서">전략 패턴을 넘어서</span></h4>
<p>앞서 전략 패턴의 소개로 <strong>런타임시 알고리즘을 선택</strong>할 수있는 행동 소프트웨어 디자인 패턴으로  이를 <code>IOC:Inversion of Control, 제어의 역전</code>이라고 소개드렸습니다.  저는 전략 패턴이외에도 Ioc 를 구현할 수 있는 방법으로 서버리스 아키텍처가 있다 생각하여 생각하여 하나의 예제를 소개하고자 합니다. 전자부품연구원에서 서버리크 아키텍처 연구과제로 개발 중인 Openfx의 아키텍처 입니다.</p>
<p><img src="https://github.com/keti-openfx/openfx/raw/master/OpenFx_Architecture.png" alt="Architecture of the OpenFx"></p>
<ul>
<li>기능적 유사 프레임워크로 AWS의 람다라고 생각하시면 편할 것 같습니다. 사용자가 서버의 제약없이 구현부의 코드만 개발하여 해당 프레임워크에 배포하면 자동으로 서버로 묶여 실행되는 구조입니다.  어떻게 구현되는 것일까요?</li>
</ul>
<p>아래 예제는 Openfx의 아키텍처에서 Openfx-fn 에서 Executer 의 서버 구현 코드를 일부 가져왔습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> imp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loadPlugin</span><span class="params">(moduleName, funcName)</span>:</span></span><br><span class="line">    mod = imp.load_source(funcName, moduleName)</span><br><span class="line">    <span class="comment"># load user function from module</span></span><br><span class="line">    <span class="keyword">return</span> getattr(mod, funcName)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">serve</span><span class="params">()</span>:</span></span><br><span class="line">    server = grpc.server(futures.ThreadPoolExecutor(max_workers=<span class="number">10</span>))</span><br><span class="line">    watcherServer = FxWatcherServicer(loadPlugin(moduleName, funcName))</span><br><span class="line">    fxwatcher_pb2_grpc.add_FxWatcherServicer_to_server(</span><br><span class="line">        watcherServer, server)</span><br><span class="line"></span><br><span class="line">    server.add_insecure_port(<span class="string">'[::]:'</span>+fxwatcherPort)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    serve()</span><br></pre></td></tr></table></figure>
<ul>
<li>핵심은 imp 라이브러리에서 제공하는 loadPlugin 기능입니다. 외부 라이브러리의 함수를 변수로 받아 Server로 등록하는 기능을 수행하며,  런타임시 임의의 함수를 불러와 서버에 등록하여 서버를 시작합니다. 이외에도 도커의 이미지 기술을 활용하여 런타임시간을 늦춰 사용자 함수를 배포할 때 서버의 이미지와 묶여 서버로 실행되는 구조를 가지고 있습니다.</li>
</ul>
<p><strong>전략 패턴의 활용</strong></p>
<p>다음은 동일한 메소드를 가진 클래스들에 대해 어떻게 사용되고 있는 지, gRPC Server의 구현 코드 예제를 보면서 설명하겠습니다.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A ServerOption sets options such as credentials, codec and keepalive parameters, etc.</span></span><br><span class="line"><span class="keyword">type</span> ServerOption <span class="keyword">interface</span> &#123;</span><br><span class="line">	apply(*serverOptions)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 기본 </span></span><br><span class="line"><span class="keyword">type</span> EmptyServerOption <span class="keyword">struct</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(EmptyServerOption)</span> <span class="title">apply</span><span class="params">(*serverOptions)</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자 옵션을 위한 구조체 </span></span><br><span class="line"><span class="keyword">type</span> funcServerOption <span class="keyword">struct</span> &#123;</span><br><span class="line">	f <span class="function"><span class="keyword">func</span><span class="params">(*serverOptions)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자 옵션 함수 실행</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(fdo *funcServerOption)</span> <span class="title">apply</span><span class="params">(do *serverOptions)</span></span> &#123;</span><br><span class="line">	fdo.f(do)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 사용자 옵션 생성 함수</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newFuncServerOption</span><span class="params">(f <span class="keyword">func</span>(*serverOptions)</span>) *<span class="title">funcServerOption</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> &amp;funcServerOption&#123;</span><br><span class="line">		f: f,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewServer</span><span class="params">(opt ...ServerOption)</span> *<span class="title">Server</span></span> &#123;</span><br><span class="line">	opts := defaultServerOptions</span><br><span class="line">    <span class="keyword">for</span> _, o := <span class="keyword">range</span> opt &#123;</span><br><span class="line">		o.apply(&amp;opts)</span><br><span class="line">	&#125;</span><br><span class="line">	s := &amp;Server&#123;</span><br><span class="line">		lis:    <span class="built_in">make</span>(<span class="keyword">map</span>[net.Listener]<span class="keyword">bool</span>),</span><br><span class="line">		opts:   opts,</span><br><span class="line">		conns:  <span class="built_in">make</span>(<span class="keyword">map</span>[transport.ServerTransport]<span class="keyword">bool</span>),</span><br><span class="line">		m:      <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]*service),</span><br><span class="line">		quit:   grpcsync.NewEvent(),</span><br><span class="line">		done:   grpcsync.NewEvent(),</span><br><span class="line">		czData: <span class="built_in">new</span>(channelzData),</span><br><span class="line">	&#125;</span><br><span class="line">	chainUnaryServerInterceptors(s)</span><br><span class="line">	chainStreamServerInterceptors(s)</span><br><span class="line">	s.cv = sync.NewCond(&amp;s.mu)</span><br><span class="line">	<span class="keyword">if</span> EnableTracing &#123;</span><br><span class="line">		_, file, line, _ := runtime.Caller(<span class="number">1</span>)</span><br><span class="line">		s.events = trace.NewEventLog(<span class="string">"grpc.Server"</span>, fmt.Sprintf(<span class="string">"%s:%d"</span>, file, line))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> channelz.IsOn() &#123;</span><br><span class="line">		s.channelzID = channelz.RegisterServer(&amp;channelzServer&#123;s&#125;, <span class="string">""</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>apply 를 하면 뭐가 달라지는 건데? …</li>
</ul>
<h4><span id="참고">참고</span></h4>
<p><a href="https://en.wikipedia.org/wiki/Strategy_pattern#Strategy_and_open/closed_principle">위키백과_전략패턴</a></p>
<p><a href="https://ricepower.tistory.com/13">제어의 역전과 의존성 주입 간단 정리</a></p>
<p><a href="http://pyvideo.org/video/146/pycon-2009--the--lack-of--design-patterns-in-pyth">파이콘 2009_ 다자인 패턴 소개</a></p>
<p><a href="https://github.com/keti-openfx/openfx">전자부품연구원 서버리스 아키텍처, Openfx github</a></p>
<p><a href="https://github.com/grpc/grpc-go/blob/master/server.go">gRPC github</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/02/06/Design_Pattern/Iterator_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Iterator Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-02-06T08:25:24.000Z">2020-02-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 minutes lesen (Über 1378 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/02/06/Design_Pattern/Iterator_Pattern/">Iterator Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="디자인-패턴">디자인 패턴</span></h2>
<p>객체 지향 프로그래밍 설계에서 자주 발생하는 문제들을 피하기 위해 사용되는 패턴</p>
<p>다만, 알고리즘이 아니라 상황에 따라 자주 쓰이는 설계 방법을 정리한 코딩 방법론이며 모든 상황의 해결책은 아니다. 중요한 것은 디자인 패턴에 얽매이는 것이 아니라 그 패턴이 <strong>왜 효율적인 방식인지를 이해</strong>하여야 한다.</p>
<h2><span id="이터레이터iterator-패턴">이터레이터(iterator) 패턴</span></h2>
<p>반복이 필요한 자료구조를 모두 <strong>동일한 인터페이스를 통해 접근</strong>할 수 있도록 메서드를 이용해 자료구조를 활용할 수 있도록 해준다.</p>
<p>파이썬의 경우, 이터레이터와 제너레이터를 묶어 문법으로 소개되어 있습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 이터레이터</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &lt;next item&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i = iter(L)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> i</span><br><span class="line">&lt;iterator object at <span class="number">0x8116870</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.next()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.next()</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.next()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.next()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File "&lt;stdin&gt;", line 1, in ?</span><br><span class="line">StopIteration</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<ul>
<li>굳이 iter() 함수를 사용하지 않아도 for 문으로 접근이 가능하다. 이것은 looping 하는 동안, python 내부에서 임시로 list를 iterator로 자동으로 변환됨</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># generator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_ints</span><span class="params">(N)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line">        </span><br><span class="line"><span class="comment"># generator expression</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>( i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">10</span>) <span class="keyword">if</span> i % <span class="number">2</span> )</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x7f6105d90960</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#1 제너레이터 사용 이유, 메모리 </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.getsizeof( [i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">100</span>) <span class="keyword">if</span> i % <span class="number">2</span>] )    <span class="comment"># list</span></span><br><span class="line"><span class="number">536</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.getsizeof( [i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000</span>) <span class="keyword">if</span> i % <span class="number">2</span>] )</span><br><span class="line"><span class="number">4280</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.getsizeof( (i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">100</span>) <span class="keyword">if</span> i % <span class="number">2</span>) )    <span class="comment"># generator</span></span><br><span class="line"><span class="number">80</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.getsizeof( (i <span class="keyword">for</span> i <span class="keyword">in</span> xrange(<span class="number">1000</span>) <span class="keyword">if</span> i % <span class="number">2</span>) )</span><br><span class="line"><span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2 제너레이터 사용 이유, Lazy evaluation </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci_func</span><span class="params">(n)</span>:</span></span><br><span class="line">	a,b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">	i = <span class="number">0</span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> (i &gt; n):    <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">fib = fibonacci_func(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> fib:</span><br><span class="line">	<span class="keyword">print</span> x</span><br></pre></td></tr></table></figure>
<ul>
<li>#1 Memory 를 효율적으로 사용할 수 있다.</li>
</ul>
<blockquote>
<p>list 는 list 안에 속한 모든 데이터를 메모리에 적재하기 때문에 list의 크기 만큼 차지하는 메모리 사이즈가 늘어나게 된다. 하지만 generator 의 경우 데이터 값을 한꺼번에 메모리에 적재 하는 것이 아니라 next() 메소드를 통해 차례로 값에 접근할 때마다 메모리에 적재하는 방식이다.</p>
</blockquote>
<ul>
<li>#2 Lazy evaluation 지원, 메모리상의 효율성 및 불필요한 연산의 배제가 가능하여 효율적인 퍼포먼스를 기대할 수 있다.</li>
</ul>
<p><code>itertools</code>  라이브러리에서 <a href="https://docs.python.org/2/library/itertools.html">다양한 이터레이터의 활용 예</a>(iterator building block)를 확인할 수 있습니다.</p>
<p><strong>Infinite Iterators:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Iterator</th>
<th style="text-align:center">Arguments</th>
<th style="text-align:center">Results</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.count"><code>count()</code></a></td>
<td style="text-align:center">start, [step]</td>
<td style="text-align:center">start, start+step, start+2*step, …</td>
<td style="text-align:center"><code>count(10) --&gt; 10 11 12 13 14 ...</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.cycle"><code>cycle()</code></a></td>
<td style="text-align:center">p</td>
<td style="text-align:center">p0, p1, … plast, p0, p1, …</td>
<td style="text-align:center"><code>cycle('ABCD') --&gt; A B C D A B C D ...</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.repeat"><code>repeat()</code></a></td>
<td style="text-align:center">elem [,n]</td>
<td style="text-align:center">elem, elem, elem, … endlessly or up to n times</td>
<td style="text-align:center"><code>repeat(10, 3) --&gt; 10 10 10</code></td>
</tr>
</tbody>
</table>
<p><strong>Iterators terminating on the shortest input sequence:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Iterator</th>
<th style="text-align:center">Arguments</th>
<th style="text-align:center">Results</th>
<th style="text-align:center">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.chain"><code>chain()</code></a></td>
<td style="text-align:center">p, q, …</td>
<td style="text-align:center">p0, p1, … plast, q0, q1, …</td>
<td style="text-align:center"><code>chain('ABC', 'DEF') --&gt; A B C D E F</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.compress"><code>compress()</code></a></td>
<td style="text-align:center">data, selectors</td>
<td style="text-align:center">(d[0] if s[0]), (d[1] if s[1]), …</td>
<td style="text-align:center"><code>compress('ABCDEF', [1,0,1,0,1,1]) --&gt; A C E F</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.dropwhile"><code>dropwhile()</code></a></td>
<td style="text-align:center">pred, seq</td>
<td style="text-align:center">seq[n], seq[n+1], starting when pred fails</td>
<td style="text-align:center"><code>dropwhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 6 4 1</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.groupby"><code>groupby()</code></a></td>
<td style="text-align:center">iterable[, keyfunc]</td>
<td style="text-align:center">sub-iterators grouped by value of keyfunc(v)</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.ifilter"><code>ifilter()</code></a></td>
<td style="text-align:center">pred, seq</td>
<td style="text-align:center">elements of seq where pred(elem) is true</td>
<td style="text-align:center"><code>ifilter(lambda x: x%2, range(10)) --&gt; 1 3 5 7 9</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.ifilterfalse"><code>ifilterfalse()</code></a></td>
<td style="text-align:center">pred, seq</td>
<td style="text-align:center">elements of seq where pred(elem) is false</td>
<td style="text-align:center"><code>ifilterfalse(lambda x: x%2, range(10)) --&gt; 0 2 4 6 8</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.islice"><code>islice()</code></a></td>
<td style="text-align:center">seq, [start,] stop [, step]</td>
<td style="text-align:center">elements from seq[start:stop:step]</td>
<td style="text-align:center"><code>islice('ABCDEFG', 2, None) --&gt; C D E F G</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.imap"><code>imap()</code></a></td>
<td style="text-align:center">func, p, q, …</td>
<td style="text-align:center">func(p0, q0), func(p1, q1), …</td>
<td style="text-align:center"><code>imap(pow, (2,3,10), (5,2,3)) --&gt; 32 9 1000</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.starmap"><code>starmap()</code></a></td>
<td style="text-align:center">func, seq</td>
<td style="text-align:center">func(*seq[0]), func(*seq[1]), …</td>
<td style="text-align:center"><code>starmap(pow, [(2,5), (3,2), (10,3)]) --&gt; 32 9 1000</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.tee"><code>tee()</code></a></td>
<td style="text-align:center">it, n</td>
<td style="text-align:center">it1, it2, … itn splits one iterator into n</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.takewhile"><code>takewhile()</code></a></td>
<td style="text-align:center">pred, seq</td>
<td style="text-align:center">seq[0], seq[1], until pred fails</td>
<td style="text-align:center"><code>takewhile(lambda x: x&lt;5, [1,4,6,4,1]) --&gt; 1 4</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.izip"><code>izip()</code></a></td>
<td style="text-align:center">p, q, …</td>
<td style="text-align:center">(p[0], q[0]), (p[1], q[1]), …</td>
<td style="text-align:center"><code>izip('ABCD', 'xy') --&gt; Ax By</code></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.izip_longest"><code>izip_longest()</code></a></td>
<td style="text-align:center">p, q, …</td>
<td style="text-align:center">(p[0], q[0]), (p[1], q[1]), …</td>
<td style="text-align:center"><code>izip_longest('ABCD', 'xy', fillvalue='-') --&gt; Ax By C- D-</code></td>
</tr>
</tbody>
</table>
<p><strong>Combinatoric generators:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">Iterator</th>
<th style="text-align:center">Arguments</th>
<th style="text-align:right">Results</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.product"><code>product()</code></a></td>
<td style="text-align:center">p, q, … [repeat=1]</td>
<td style="text-align:right">cartesian product, equivalent to a nested for-loop</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.permutations"><code>permutations()</code></a></td>
<td style="text-align:center">p[, r]</td>
<td style="text-align:right">r-length tuples, all possible orderings, no repeated elements</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.combinations"><code>combinations()</code></a></td>
<td style="text-align:center">p, r</td>
<td style="text-align:right">r-length tuples, in sorted order, no repeated elements</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.python.org/2/library/itertools.html#itertools.combinations_with_replacement"><code>combinations_with_replacement()</code></a></td>
<td style="text-align:center">p, r</td>
<td style="text-align:right">r-length tuples, in sorted order, with repeated elements</td>
</tr>
<tr>
<td style="text-align:center"><code>product('ABCD', repeat=2)</code></td>
<td style="text-align:center"></td>
<td style="text-align:right"><code>AA AB AC AD BA BB BC BD CA CB CC CD DA DB DC DD</code></td>
</tr>
<tr>
<td style="text-align:center"><code>permutations('ABCD', 2)</code></td>
<td style="text-align:center"></td>
<td style="text-align:right"><code>AB AC AD BA BC BD CA CB CD DA DB DC</code></td>
</tr>
<tr>
<td style="text-align:center"><code>combinations('ABCD', 2)</code></td>
<td style="text-align:center"></td>
<td style="text-align:right"><code>AB AC AD BC BD CD</code></td>
</tr>
<tr>
<td style="text-align:center"><code>combinations_with_replacement('ABCD', 2)</code></td>
<td style="text-align:center"></td>
<td style="text-align:right"><code>AA AB AC AD BB BC BD CC CD DD</code></td>
</tr>
</tbody>
</table>
<p>그 외에도 이터레이터에 Map, fliter, reduce &amp; lambda 를 사용하여 이터레이터와 함수간 매핑이 가능합니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># map </span></span><br><span class="line">items = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">list(map(<span class="keyword">lambda</span> x : x**<span class="number">2</span>, items))</span><br><span class="line"></span><br><span class="line"><span class="comment"># filter</span></span><br><span class="line">number_list = raunge(<span class="number">-5</span>, <span class="number">5</span>)</span><br><span class="line">list(filter(<span class="keyword">lambda</span> x : x&lt;<span class="number">0</span>, number_list))</span><br><span class="line"></span><br><span class="line"><span class="comment"># reduce</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce </span><br><span class="line">value = reduce((<span class="keyword">lambda</span> x,y : x+y), (x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">101</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li>제너레이터 장점(메모리, Lazy) + 함수형 언어(간결성, Lazy)</li>
</ul>
<h2><span id="참고">참고</span></h2>
<p><a href="https://gone-sw.tistory.com/4">디자인 패턴이란</a></p>
<p><a href="https://namu.wiki/w/%EB%94%94%EC%9E%90%EC%9D%B8%20%ED%8C%A8%ED%84%B4">나무위키_디자인패턴</a></p>
<p><a href="https://docs.python.org/2/library/itertools.html">itertools</a></p>
<p><a href="https://bluese05.tistory.com/56">ㅍㅍㅋㄷ  - 이터레이터, 제너레이터</a></p>
<p><a href="https://docs.python.org/2/whatsnew/2.2.html#pep-234-iterators">python 2.2 doc</a></p>
<p><a href="https://nowonbun.tistory.com/474">디자인 패턴 - 실무편</a></p>
<p><a href="https://imasoftwareengineer.tistory.com/29">파사드 패턴 - 협업</a></p>
<p><a href="https://github.com/jythontools/logbridge">파사드 패턴 - Logbridge</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/02/01/Design_Pattern/Facade_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Facade Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-02-01T08:25:24.000Z">2020-02-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes lesen (Über 560 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/02/01/Design_Pattern/Facade_Pattern/">Facade Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="디자인-패턴">디자인 패턴</span></h2>
<p>객체 지향 프로그래밍 설계에서 자주 발생하는 문제들을 피하기 위해 사용되는 패턴</p>
<p>다만, 알고리즘이 아니라 상황에 따라 자주 쓰이는 설계 방법을 정리한 코딩 방법론이며 모든 상황의 해결책은 아니다. 중요한 것은 디자인 패턴에 얽매이는 것이 아니라 그 패턴이 <strong>왜 효율적인 방식인지를 이해</strong>하여야 한다.</p>
<h2><span id="파사드facade-패턴">파사드(Facade) 패턴</span></h2>
<p>복잡한 서브시스템을 인터페이스 감싸 간단하게 만드는 패턴이며 3의 API(Third Party API)같은 외부 라이브러리를 추상화 하는데도 사용됩니다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99B6F54A5C68D4A91D" alt="img"></p>
<p>프로젝트 전체에 특정한 코드가 부분적으로 분포되어 있을 경우 유지보수에 탁월하다.</p>
<p><img src="https://t1.daumcdn.net/cfile/tistory/99EF61475C68E9BB04" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThirdPartyAPI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseClient</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DatabaseClient</span> <span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">final</span> String table, <span class="keyword">final</span> String primaryKey, <span class="keyword">final</span> Integer maxRetry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Database Request to the DB Server</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ThirdPartyAPI.DatabaseClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> DatabaseClient databaseClient;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ItemService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">databaseClient = <span class="keyword">new</span> DatabaseClient();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">final</span> String primaryKey)</span> </span>&#123;</span><br><span class="line">databaseClient.find(<span class="string">"Item"</span>, primaryKey, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>DatabaseClient 가 version Update되어 <code>find</code> 함수의 매개변수가 달라진 경우, DatabaseClient를 감싸고 있는 ItemService 의 호출부분만 변경해주면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> DatabaseClient databaseClient;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ItemService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        databaseClient = <span class="keyword">new</span> DatabaseClient();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">find</span><span class="params">(<span class="keyword">final</span> String primaryKey)</span> </span>&#123;</span><br><span class="line">        DatabaseOption databaseOption = <span class="keyword">new</span> DatabaseOption.Builder(<span class="string">"Item"</span>)</span><br><span class="line">                .withPrimaryKey(primaryKey).withMaxRetry(<span class="number">3</span>).build();</span><br><span class="line">        databaseClient.find(databaseOption);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>만약 파사드 패턴이 아니였다면?  코드를 고친 곳의 유닛테스트를 전부 다시 해야 한다.  그리고 유닛테스트를 모두 고친 후 인테그레이션 테스트를 했어야 할 것이다. 테스팅 시간이 길다면 헬게이트 오픈</li>
</ul>
</li>
</ul>
<h2><span id="참고">참고</span></h2>
<p><a href="https://gone-sw.tistory.com/4">디자인 패턴이란</a></p>
<p><a href="https://namu.wiki/w/%EB%94%94%EC%9E%90%EC%9D%B8%20%ED%8C%A8%ED%84%B4">나무위키_디자인패턴</a></p>
<p><a href="https://docs.python.org/2/library/itertools.html">itertools</a></p>
<p><a href="https://bluese05.tistory.com/56">ㅍㅍㅋㄷ  - 이터레이터, 제너레이터</a></p>
<p><a href="https://docs.python.org/2/whatsnew/2.2.html#pep-234-iterators">python 2.2 doc</a></p>
<p><a href="https://nowonbun.tistory.com/474">디자인 패턴 - 실무편</a></p>
<p><a href="https://imasoftwareengineer.tistory.com/29">파사드 패턴 - 협업</a></p>
<p><a href="https://github.com/jythontools/logbridge">파사드 패턴 - Logbridge</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/01/29/Design_Pattern/SingleTon_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Singleton Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-29T08:25:24.000Z">2020-01-29</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 minutes lesen (Über 1937 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/29/Design_Pattern/SingleTon_Pattern/">Singleton Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="디자인-패턴2">디자인 패턴(2)</span></h2>
<blockquote>
<p>중요한 것은 디자인 패턴에 얽매이는 것이 아니라 그 패턴이 <strong>왜 효율적인 방식인지를 이해</strong>하여야 한다.</p>
</blockquote>
<p>디자인 패턴 두 번째 발표자료이며 <strong>싱글턴, 옵저버 패턴</strong>에 대해 발표하겠습니다.</p>
<p>저는 저번 시간과 같이 패턴에 대해 다음과 같은 관점으로 접근하였습니다.</p>
<ul>
<li>
<p>패턴이 된 원인(어떤 점이 효율적인가), 보완해야할 점(to 잡기술 배우기)</p>
</li>
<li>
<p>패턴이 현대 프로그래밍 언어에서는 어떻게 사용되는가?</p>
</li>
</ul>
<h3><span id="싱글턴-패턴">싱글턴 패턴</span></h3>
<p><strong>싱글턴 패턴</strong>(Singleton pattern)을 따르는 클래스는, 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다. 이와 같은 디자인 유형을 <strong>싱글턴 패턴</strong>이라고 한다. 주로 공통된 객체를 여러개 생성해서 사용하는 DBCP(DataBase Connection Pool)와 같은 상황에서 많이 사용된다.  [위키미러]</p>
<h4><span id="왜-사용할까">왜 사용할까 ?</span></h4>
<p>클래스 내에서 인스턴스가 단 하나뿐임을 보장하므로, 프로그램 전역에서 해당 클래스의 인스턴스를 바로 얻을 수 있고, 불필요한 메모리 낭비를 최소화한다.</p>
<h4><span id="어떻게-구현할까">어떻게 구현할까 ?</span></h4>
<p><strong><code>__new__</code> 생성자 와 메타클래스 를 통해 구현한 싱글턴</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(self, <span class="string">'instance'</span>):</span><br><span class="line">            self.Instance = super(Singleton, self).__new__(self)</span><br><span class="line">            <span class="keyword">return</span> self.self.instance</span><br><span class="line">        </span><br><span class="line">s = singleton()</span><br><span class="line">s2 = singleton()</span><br><span class="line"></span><br><span class="line">print(<span class="string">"Object created"</span>, s)</span><br><span class="line">print(<span class="string">"Object created"</span>, s2)</span><br><span class="line"></span><br><span class="line">output</span><br><span class="line">Object created &lt;__main__.Singleton object at <span class="number">0x0000028014344EF0</span>&gt;</span><br><span class="line">Object created &lt;__main__.Singleton object at <span class="number">0x0000028014344EF0</span>&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>python 의 <code>__new__</code> 생성자를 사용하여 싱글턴 구현</p>
<ul>
<li><code>__new__</code> ? <code>__init__</code> 이 반환 값을 가질 수 없는 것을 보완한 생성자</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MetaSingleton</span><span class="params">(type)</span>:</span></span><br><span class="line">    _instances = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self <span class="keyword">not</span> <span class="keyword">in</span> self._instances:</span><br><span class="line">            self._instances[self] = super(MetaSingleton, self).__call__(*args, **kwargs)</span><br><span class="line">            <span class="keyword">return</span> self._instances[self]</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Logger</span><span class="params">(metaclass = MetaSingleton)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p><strong>싱글턴 변형, 객체는 다르지만 상태를 공유함</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton2</span>:</span></span><br><span class="line">    __shard_state = &#123;<span class="string">"1"</span>:<span class="string">"2"</span>&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.x = <span class="number">1</span></span><br><span class="line">        self.__dict__ = self.__shared_state</span><br><span class="line">        <span class="keyword">pass</span> </span><br><span class="line">    </span><br><span class="line">b1 = Singleton2();</span><br><span class="line">b2 = Singleton2();</span><br><span class="line">b1.x = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">output</span><br><span class="line">&lt;__main__.LazySingleton object at <span class="number">0x0000028014357F60</span>&gt;</span><br><span class="line">&lt;__main__.LazySingleton object at <span class="number">0x0000028014357F98</span>&gt;</span><br><span class="line">&#123;<span class="string">'1'</span>: <span class="string">'2'</span>, <span class="string">'x'</span>: <span class="number">5</span>&#125;</span><br><span class="line">&#123;<span class="string">'1'</span>: <span class="string">'2'</span>, <span class="string">'x'</span>: <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure>
<h4><span id="싱글턴의-문제점">싱글턴의 문제점</span></h4>
<p>싱글턴 인스턴스가 많은 일을 하거나 데이터를 공유시킬 경우 다른 클래스의 인스턴스들간의 결합도가 높아져 OOP 원칙, &quot;개방-폐쇠 원칙&quot;을 위해하게 된다. 따라서 수정이 어려워지고 테스트하기 어려워진다.</p>
<p>또한, <strong>멀티쓰레드 환경에서 동기화처리</strong>를 안하면 인스턴스가 두 개가 생성되는 경우가 발생할 수 있음</p>
<p>결과적으로 ‘goto는 쓰면 안돼’ , ‘전역 객체는 안좋은거야!’ 라는 말 처럼 꼭 필요한 경우가 아니면 지양해야한다.</p>
<p><strong>멀티쓰레드에서 안전한 싱클톤 클래스 생성하기</strong></p>
<p>Java 테스트했으며 3가지의 방법을 소개하겠습니다.</p>
<ol>
<li><code>Synchronized</code> 를 통한 Thread safe Lazy initialization(게으른 초기화)</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadSafeLazyInitialization</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadSafeLazyInitialization instance;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ThreadSafeLazyInitialization</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> ThreadSafeLazyInitialization <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> ThreadSafeLazyInitialization();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>private 생성자로 외부에서의 생성을 막았으나, synchronized 특성상 큰 성능저하가 발생하므로 권장하지 않는다</li>
</ul>
<ol start="2">
<li>Synchronized 대신 가정문 사용하기,  Thread safe lazy initialization + Double-checked locking</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadSafeLazyInitialization</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> ThreadSafeLazyInitialization instance;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ThreadSafeLazyInitialization</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ThreadSafeLazyInitialization <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>)&#123; </span><br><span class="line">            <span class="keyword">synchronized</span> (ThreadSafeLazyInitialization<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="keyword">null</span>)</span><br><span class="line">                    instance = <span class="keyword">new</span> ThreadSafeLazyInitialization();</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>synchronized 를 사용하는 것이 아니라 If 문 두번(확인, 동기화)으로 성능 저하를 피했지만 완벽한 방법(개발자가 직접 문제를 회피해야할 코드를 짜야함)은 아닙니다.</li>
</ul>
<ol start="3">
<li><code>final</code> 을 사용한 Initialization on demand holder idiom</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Something</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Something</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LazyHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Something INSTANCE = <span class="keyword">new</span> Something();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Something <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> LazyHolder.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>개발자가 직접 동기화 문제에 대해 코드를 작성하여 문제를 회피하려 한다면 프로그램 구조가 그 만큼 복잡해지고 비용 문제가 생길 수 있고 특히 유지보수 측면에서 이상적이지 못합니다. 이 방법은 JVM의 클래스 초기화 과정에서 보장되는 원자적 특성을 이용하여 싱글턴의 초기화 문제에 대한 <strong>책임을 JVM에 떠넘긴다.</strong></p>
<p>holder안에 선언된 instance가 static이기 때문에 클래스 로딩시점에 한번만 호출될 것이며 final을 사용해 다시 값이 할당되지 않도록 만든 방법.</p>
<p>*** 가장 많이 사용하고 일반적인 Singleton 클래스 사용 방법이다.**</p>
</li>
</ul>
<h4><span id="현-트렌드에서의-싱글턴">현 트렌드에서의 싱글턴?</span></h4>
<p>여기까지 살펴보았을 때, 배(그냥 코드로 사용하기)보다 배꼽(싱글턴 패턴 사용)이 더 큰 상황이라 느꼈습니다.  그래서 현업에서는 싱글턴을 사용해야할 상황일 때 실제 사용하나? 가 궁금해서 생각해봤습니다.</p>
<p>위키미러를 참고했을 때 싱글턴의 활용처는 DBCP(DataBase Connection Pool)와 같은 상황입니다. 그러면 현 트랜드에서는 DBCP를 싱글턴을 통해 활용하고 있을까요?</p>
<p>답변부터 드리면,  구글(go, Kotlin)에서는 싱글턴의 <code>Initialization on demand holder idiom</code> 을 문법으로 구현하는 추세입니다.</p>
<p><code>go</code> - <a href="http://Once.do">Once.do</a> 활용</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> once sync.Once</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DriverPg <span class="keyword">struct</span> &#123;</span><br><span class="line">	conn <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// variavel Global</span></span><br><span class="line"><span class="keyword">var</span> instance *DriverPg</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Connect</span><span class="params">()</span> *<span class="title">DriverPg</span></span> &#123;</span><br><span class="line">	once.Do(<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		instance = &amp;DriverPg&#123;conn: <span class="string">"DriverConnectPostgres"</span>&#125;</span><br><span class="line">        <span class="comment">//DB 연결 처리 </span></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> instance</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// chamada</span></span><br><span class="line">	<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">		time.Sleep(time.Millisecond * <span class="number">600</span>)</span><br><span class="line">		fmt.Println(*Connect())</span><br><span class="line">	&#125;()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 100 goroutine</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">		<span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(ix <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">			time.Sleep(time.Millisecond * <span class="number">60</span>)</span><br><span class="line">			fmt.Println(ix, <span class="string">" = "</span>, Connect().conn)</span><br><span class="line">		&#125;(i)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Scanln()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>동기라이브러리안 <code>Once</code> keyword 이용하여  Initialization on demand holder idiom 구현</li>
</ul>
<p><code>kotlin</code>- Object 활용</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Payroll &#123; <span class="comment">//object 클래스 생성으로 싱글턴을 구현</span></span><br><span class="line">    <span class="keyword">val</span> allEmplyees = arrayListOf&lt;Person&gt;()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">calculateSalary</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//사용</span></span><br><span class="line">Payroll.calculateSalary() <span class="comment">//싱글턴처럼 . 으로 접근</span></span><br><span class="line">Payroll.allEmplyees.add(Person(<span class="string">"zerog"</span>, Company(<span class="string">"zerog"</span>, Address(<span class="string">""</span>))))</span><br></pre></td></tr></table></figure>
<ul>
<li>객체(Object)는 <strong>클래스 선언과 그 클래스에 속한 단일 인스턴스의 생성을</strong> 동시에 처리해주기 때문에 싱글톤에 사용하기 적합합니다.  double-checked locking 같은 locking 알고리즘에 의존하는 것 없이 thread-safe 하고 lazy 한 초기화를 가능하게 해 주기 때문에 JVM에서 싱글톤을 구현하는 방법으로 선호됩니다. 코틀린에서 간단하게 object를 선언하면, 안전하고 효율적인 싱글톤 구현을 보장받을 수 있습니다.</li>
</ul>
<h4><span id="정리">정리</span></h4>
<p>싱글톤의 원리와 구현방법을 살펴보았습니다. 전역 객체를 생성하여 접근하여 메모리 측면의 효율성을 기대하는 패턴이지만, 쓰레드에서의 싱글톤과 OOP 기법의 안정성을 위해 Initialization on demand holder idiom  기법을사용하여 싱글톤을 구현하는 것이 바람직합니다. 더불어 현 구글 언어(go, kotilin)에서는 해당 기법이 문법으로 소개되어있으며 사용하시는 데 참고하시면 되겠습니다.</p>
<h3><span id="참고">참고</span></h3>
<p><a href="https://ko.wikipedia.org/wiki/%EC%8B%B1%EA%B8%80%ED%84%B4_%ED%8C%A8%ED%84%B4">위키백과_싱글턴 패턴</a></p>
<p><a href="https://tourspace.tistory.com/109">https://tourspace.tistory.com/109</a></p>
<p><a href="https://takhyeongmin.github.io/2019/06/24/HowToKotlinSingleTon/">https://takhyeongmin.github.io/2019/06/24/HowToKotlinSingleTon/</a></p>
<p><a href="https://fenderist.tistory.com/109">https://fenderist.tistory.com/109</a></p>
<p><a href="https://www.fun-coding.org/PL&amp;OOP2-2.html">https://www.fun-coding.org/PL&amp;OOP2-2.html</a></p>
<p><a href="https://wikidocs.net/3693">기본적인 싱글톤 구현방법 5가지</a></p>
<p><a href="https://limkydev.tistory.com/67">싱글톤의 고도화</a></p>
<p><a href="https://jeong-pro.tistory.com/86">싱글톤 문제점과 3가지 해결방안</a></p>
<p><a href="https://medium.com/golang-issue/how-singleton-pattern-works-with-golang-2fdd61cd5a7f">고랭-싱글톤</a></p>
<p><a href="https://beomseok95.tistory.com/239">코틀린-싱글톤</a></p>

        </div>
        
        
        
    </div>
</div>








    
<div class="card">
    
    <div class="card-image">
        <a href="/2020/01/21/Design_Pattern/Observer_Pattern/" class="image is-7by1">
            <img class="thumbnail" src="/images/design.gif" alt="Observer Pattern">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-01-21T08:25:24.000Z">2020-01-21</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/develop/">develop</a>&nbsp;/&nbsp;<a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 minutes lesen (Über 1881 Worte)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2020/01/21/Design_Pattern/Observer_Pattern/">Observer Pattern</a>
            
        </h1>
        <div class="content">
            <h2><span id="디자인-패턴">디자인 패턴</span></h2>
<blockquote>
<p>중요한 것은 디자인 패턴에 얽매이는 것이 아니라 그 패턴이 <strong>왜 효율적인 방식인지를 이해</strong>하여야 한다.</p>
</blockquote>
<p>디자인 패턴 두 번째 발표자료이며 <strong>싱글턴, 옵저버 패턴</strong>에 대해 발표하겠습니다.</p>
<p>저는 저번 시간과 같이 패턴에 대해 다음과 같은 관점으로 접근하였습니다.</p>
<ul>
<li>
<p>패턴이 된 원인(어떤 점이 효율적인가), 보완해야할 점(to 잡기술 배우기)</p>
</li>
<li>
<p>패턴이 현대 프로그래밍 언어에서는 어떻게 사용되는가?</p>
</li>
</ul>
<h2><span id="옵저버-패턴">옵저버 패턴</span></h2>
<p><strong>옵저버 패턴</strong>(observer pattern)은 <a href="https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_(%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99)">객체</a>의 상태 변화를 관찰하는 관찰자들, 즉 옵저버들의 목록을 객체에 등록하여 상태 변화가 있을 때마다 <a href="https://ko.wikipedia.org/wiki/%EB%A9%94%EC%84%9C%EB%93%9C">메서드</a> 등을 통해 객체가 직접 목록의 각 옵저버에게 통지하도록 하는 <a href="https://ko.wikipedia.org/wiki/%EB%94%94%EC%9E%90%EC%9D%B8_%ED%8C%A8%ED%84%B4">디자인 패턴</a> 입니다.</p>
<p>**왜 사용할까 ? **</p>
<p>객체 간의 일대 다 종속성 관계를 관리할 때 사용됩니다.</p>
<ul>
<li>객체 간의 밀접한 관계없이 객체 간의 일대 다 종속성을 정의해야 합니다.</li>
<li>하나의 객체가 상태를 변경할 때 개방형 수의 종속 객체가 자동으로 업데이트되도록 해야합니다.</li>
<li>한 객체가 개방 된 수의 다른 객체를 통지 할 수 있어야합니다.</li>
</ul>
<p><strong>어떻게 구현할까?</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self._observers = []</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">register_observer</span><span class="params">(self, observer)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self._observers.append(observer)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify_observers</span><span class="params">(self, *args, **kwargs)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">for</span> observer <span class="keyword">in</span> self._observers:</span><br><span class="line">            observer.notify(self, *args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, observable)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        observable.register_observer(self)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">notify</span><span class="params">(self, observable, *args, **kwargs)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        print(<span class="string">'Got'</span>, args, kwargs, <span class="string">'From'</span>, observable)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">subject = Observable()</span><br><span class="line">observer = Observer(subject)</span><br><span class="line">subject.notify_observers(<span class="string">'test'</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>주체에 따라 Push, Pull 방식으로 나눠집니다. (자료 보강 필요 ㅠㅠ)</li>
</ul>
<h4><span id="한계">한계</span></h4>
<p>하지만, <strong>옵저버 패턴의 한계</strong>도 존재합니다.</p>
<p>개체 간의 일대 다 종속성 정의는 대상을 특정 종속 개체에 연결하기 때문에 융통성이 없습니다. 이는 성능이 필요한 상황에서는 (초당 수천 번 실행되는 <strong>저수준 커널 구조</strong>를 고려할 때) 고민해봐야할 문제입니다.  밀접하게 연결된 객체는 일부 시나리오에서 구현하기가 어려울 수 있으며 인터페이스가 다른 여러 객체를 참조하고 업데이트하는 방법을 알고 있기 때문에 재사용 할 수 있어 기대하지 않은 결과를 초래할 수 있습니다.</p>
<p>또한, 옵저버 패턴인 경우 메모리 누수를 초래할 수 있습니다.</p>
<blockquote>
<h3><span id="so-what-can-possibly-go-wrong">So what can possibly go wrong?</span></h3>
<p>In a runtime where memory is managed automatically like Java or C#, the <strong>subject holds a strong reference</strong> to the observers, keeping them alive. The strong reference from the subject (the observed object) to the observer, prevents the observer (and any objects it references) from being <strong>garbage collected</strong> until the observer is unregistered. A <strong>memory leak</strong> happens, if the observer fails to unregister from the subject when it no longer needs to receive notifications. In our countdown timer example if observers do not call unregister when they become invisible, they will receive notifications and waste CPU cycles updating invisible UI elements. This issue is called <a href="https://en.wikipedia.org/wiki/Lapsed_listener_problem">Lapsed Listener Problem</a>.</p>
<p>If you implement the observer pattern in C++ (no garbage collection, memory is managed manually) and you call <strong>delete</strong> on one of the observers without unregistering it from the subject then you are in trouble. Now you have a dangling pointer that points to invalid data. Whenever the subject notifies its observers a <strong>segmentation fault</strong> will be raised.</p>
<h4><span id="always-unregister-your-listeners-unless-they-are-interested-in-receiving-notifications">Always unregister your listeners unless they are interested in receiving notifications.</span></h4>
<p>Another approach for dealing with lapsed listeners (observers) is to use <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html">Weak References</a>.</p>
<p>The below implementation of CountDownTimer uses weak references to keep track of registered observers. If the only references to an instance are weak references, then the instance becomes a candidate for Garbage Collection. In contrast to strong references, weak references don’t prevent garbage collector to finilize the instance and reclaim its memory.</p>
</blockquote>
<p>사실 이는 옵저버 패턴뿐만 아니라 OOP 객체를 다룰 때 공통적으로 발생할 수 있는 문제입니다. 단적인 해결방법은 <code>Weakreference</code> 를 사용하여 수동적으로 가비지 컬렉션을 사용한다고 명시하면 예방할 수 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> codekata.observer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.ref.WeakReference;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDownTimer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> ONE_SECOND = <span class="number">1000L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> countDownMillis;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> elapsedTimeSinceLastTick;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> totalElapsedTime;</span><br><span class="line">    <span class="keyword">private</span> List&lt;WeakReference&lt;CountDownObserver&gt;&gt; observers = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CountDownTimer</span><span class="params">(<span class="keyword">long</span> initialValue)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.countDownMillis = initialValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Called every frame</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">long</span> deltaTime)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isFinished()) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (totalElapsedTime == <span class="number">0</span>) &#123;</span><br><span class="line">            notifyStart();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        totalElapsedTime += deltaTime;</span><br><span class="line">        elapsedTimeSinceLastTick += deltaTime;</span><br><span class="line">        <span class="keyword">if</span> (elapsedTimeSinceLastTick &gt;= ONE_SECOND) &#123;</span><br><span class="line">            elapsedTimeSinceLastTick = <span class="number">0</span>;</span><br><span class="line">            notifyCountDown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (isFinished()) &#123;</span><br><span class="line">            notifyCountDown();</span><br><span class="line">            notifyFinish();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isFinished</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> totalElapsedTime &gt;= countDownMillis;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyCountDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(WeakReference&lt;CountDownObserver&gt; ref : <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            CountDownObserver observer = ref.get();</span><br><span class="line">            <span class="keyword">if</span> (observer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                observer.onCountDown(</span><br><span class="line">                        totalElapsedTime,</span><br><span class="line">                        Math.max(<span class="number">0</span>, (countDownMillis - totalElapsedTime)));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"!!! DELETED"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyStart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(WeakReference&lt;CountDownObserver&gt; ref : <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            CountDownObserver observer = ref.get();</span><br><span class="line">            <span class="keyword">if</span> (observer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                observer.onStart();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">notifyFinish</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(WeakReference&lt;CountDownObserver&gt; ref : <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            CountDownObserver observer = ref.get();</span><br><span class="line">            <span class="keyword">if</span> (observer != <span class="keyword">null</span>) &#123;</span><br><span class="line">                observer.onFinish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(CountDownObserver observer)</span> </span>&#123;</span><br><span class="line">        WeakReference&lt;CountDownObserver&gt; weakReference = findWeakReference(observer);</span><br><span class="line">        <span class="keyword">if</span> (weakReference == <span class="keyword">null</span>) &#123;</span><br><span class="line">            weakReference = <span class="keyword">new</span> WeakReference&lt;&gt;(observer);</span><br><span class="line">            <span class="keyword">this</span>.observers.add(weakReference);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unregisterObserver</span><span class="params">(CountDownObserver observer)</span> </span>&#123;</span><br><span class="line">        WeakReference&lt;CountDownObserver&gt; weakReference = findWeakReference(observer);</span><br><span class="line">        <span class="keyword">if</span> (weakReference != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.observers.remove(weakReference);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> WeakReference&lt;CountDownObserver&gt; <span class="title">findWeakReference</span><span class="params">(CountDownObserver observer)</span> </span>&#123;</span><br><span class="line">        WeakReference&lt;CountDownObserver&gt; weakReference = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span>(WeakReference&lt;CountDownObserver&gt; ref : <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            <span class="keyword">if</span> (ref.get() == observer) &#123;</span><br><span class="line">                weakReference = ref;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> weakReference;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>자바 고수의 도움이 필요합니다.</li>
</ul>
<p><strong>그럼에도 불구하고…</strong></p>
<p>옵저버 패턴에서의 객체 관리는 <code>링크리스트</code> 로 저장합니다. 하지만 이는 단일 스레드에서만 해당되는 예기로 멀티스레드 상황에서 Thread-safe 상황을 보장하지 못합니다.</p>
<h4><span id="그렇다면-어디에-사용해볼까">그렇다면 어디에 사용해볼까?</span></h4>
<p>대표적으로 MVC 아키텍처에서 사용할 수 있습니다.  MVC 는 Model-View-Controller 로 소프트웨어 디자인 패턴입니다.  사용자 인터페이스로부터 비지니스 로직을 분리하여 애플리케이션의 시각적 요소나 그 이면에서 실행되는 비즈니스 로직을 서로 영향 없이 쉽게 고칠 수 있는 애플리케이션을 만들 수 있습니다.</p>
<p>![Observer Pattern](C:\Users\user\Desktop\공부\CS Study\Design Pattern\Observer Pattern.PNG)</p>
<ul>
<li>Model은 애플리케이션의 정보(데이터)를 나타내며,View는 텍스트, 체크박스 항목 등과 같은 사용자 인터페이스 요소를 나타내고, Controller는 데이터와 비즈니스 로직 사이의 상호동작을 관리한다.</li>
</ul>
<p>MVC가 활용된 예로 Qt, MFC 프레임워크가 있는 데 MFC 프레임워크에서의 옵서버 패턴 사용을 살펴보겠습니다.</p>
<p>![MFC1](C:\Users\user\Desktop\공부\CS Study\Design Pattern\MFC1.PNG)</p>
<ul>
<li>먼저 뷰를 원하는 곳에 배치합니다.</li>
</ul>
<p>![MFC2](C:\Users\user\Desktop\공부\CS Study\Design Pattern\MFC2.PNG)</p>
<ul>
<li>뷰를 배치함과 동시에 컨트롤러 코드가 자동으로 생성됩니다.</li>
</ul>
<p>![MFC3](C:\Users\user\Desktop\공부\CS Study\Design Pattern\MFC3.PNG)</p>
<ul>
<li>컨트롤러 코드를 작성하여 이벤트가 발생했을 시 구현할 내용을 작성합니다.</li>
</ul>
<h4><span id="사용처">사용처?</span></h4>
<p>MVC 같은 경우 기능의 On/OFF 인 상태가 다수일 경우 사용하기 좋습니다.  곰플레이어에서의 동영상 관련 기능 이벤트나 한글의 여러 기능을 예로 생각하면 이해하기 편할 것 같습니다.</p>
<p>참고</p>
<p><a href="https://en.wikipedia.org/wiki/Observer_pattern">위키백과 옵서버패턴</a></p>
<p><a href="https://includestdio.tistory.com/39">옵서버 방식 두가지</a></p>
<p><a href="https://doohyun.tistory.com/82">https://doohyun.tistory.com/82</a></p>
<p><a href="https://www.dofactory.com/topic/1167/chain-of-responsibility-vs-observer-pattern.aspx">로깅 - 옵저버 vs 책임연쇄</a></p>
<p><a href="http://ilkinulas.github.io/development/general/2016/04/17/observer-pattern.html">옵서버패턴에서의 메모리릭</a></p>
<p><a href="https://glikmakesworld.tistory.com/3">https://glikmakesworld.tistory.com/3</a> 예시</p>
<p><a href="https://nowonbun.tistory.com/480">https://nowonbun.tistory.com/480</a> 실무</p>

        </div>
        
        
        
    </div>
</div>








</div>
                
                




<div class="column is-4-tablet is-4-desktop is-4-widescreen  has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/Face.jpg" alt="Han">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        Han
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        뎁린이의 성장기록용 아카이브
                    </p>
                    
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <a href="/archives">
                        <p class="title has-text-weight-normal">
                            9
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Kategorien
                    </p>
                    <a href="/categories">
                        <p class="title has-text-weight-normal">
                            6
                        </p>
                    </a>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <a href="/tags">
                        <p class="title has-text-weight-normal">
                            5
                        </p>
                    </a>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/HanHoRang" target="_blank" rel="noopener">
                Folgen</a>
        </div>
        
        
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Hexo</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">hexo.io</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://github.com/HanHoRang" target="_blank" rel="noopener">
                    <span class="level-left">
                        <span class="level-item">Github</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Kategorien
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Programming-Paradigm/">
            <span class="level-start">
                <span class="level-item">Programming Paradigm</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Programming-Paradigm/Functional-Programming/">
            <span class="level-start">
                <span class="level-item">Functional Programming</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/Tools/">
            <span class="level-start">
                <span class="level-item">Tools</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/Tools/Hexo/">
            <span class="level-start">
                <span class="level-item">Hexo</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/develop/">
            <span class="level-start">
                <span class="level-item">develop</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/develop/Design-Pattern/">
            <span class="level-start">
                <span class="level-item">Design Pattern</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">6</span>
            </span>
        </a></li></ul></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/Design-Pattern/" style="font-size: 20px;">Design Pattern</a> <a href="/tags/Functional-Programming/" style="font-size: 15px;">Functional Programming</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Letzte Einträge
        </h3>
        
        <article class="media">
            
            <a href="/2020/03/20/Design_Pattern/Prototype_Pattern/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/design.gif" alt="Prototype Pattern">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-19T15:00:00.000Z">2020-03-20</time></div>
                    <a href="/2020/03/20/Design_Pattern/Prototype_Pattern/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Prototype Pattern</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/develop/">develop</a> / <a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/03/05/Design_Pattern/Strategy_Pattern/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/design.gif" alt="Strategy Pattern">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-03-05T08:25:24.000Z">2020-03-05</time></div>
                    <a href="/2020/03/05/Design_Pattern/Strategy_Pattern/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Strategy Pattern</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/develop/">develop</a> / <a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/02/16/blog/Github_Blog_구축기/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/hexo.jpg" alt="깃허브 블로그 구축기">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-16T07:25:24.000Z">2020-02-16</time></div>
                    <a href="/2020/02/16/blog/Github_Blog_구축기/" class="title has-link-black-ter is-size-6 has-text-weight-normal">깃허브 블로그 구축기</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/Tools/">Tools</a> / <a class="has-link-grey -link" href="/categories/Tools/Hexo/">Hexo</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/02/06/Design_Pattern/Iterator_Pattern/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/design.gif" alt="Iterator Pattern">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-06T08:25:24.000Z">2020-02-06</time></div>
                    <a href="/2020/02/06/Design_Pattern/Iterator_Pattern/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Iterator Pattern</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/develop/">develop</a> / <a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2020/02/01/Design_Pattern/Facade_Pattern/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/design.gif" alt="Facade Pattern">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-02-01T08:25:24.000Z">2020-02-01</time></div>
                    <a href="/2020/02/01/Design_Pattern/Facade_Pattern/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Facade Pattern</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/categories/develop/">develop</a> / <a class="has-link-grey -link" href="/categories/develop/Design-Pattern/">Design Pattern</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archive
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/03/">
                <span class="level-start">
                    <span class="level-item">March 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/02/">
                <span class="level-start">
                    <span class="level-item">February 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Tags
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Blog/">
                        <span class="tag">Blog</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Design-Pattern/">
                        <span class="tag">Design Pattern</span>
                        <span class="tag is-grey">6</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Functional-Programming/">
                        <span class="tag">Functional Programming</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Hexo/">
                        <span class="tag">Hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/Python/">
                        <span class="tag">Python</span>
                        <span class="tag is-grey">2</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/coring.gif" alt="HoRang Blog" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 HoRang&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("kr");</script>


<script>
var IcarusThemeSettings = {
    site: {
        url: 'https://hanhorang.github.io',
        external_link: {"enable":true,"exclude":[]}
    },
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>





<script src="/js/animation.js"></script>



<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>



<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>


<a id="back-to-top" title="Zurück nach oben" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>














<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Tippen Sie etwas..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Seiten',
                CATEGORIES: 'Kategorien',
                TAGS: 'Tags',
                UNTITLED: '(Unbenannt)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>